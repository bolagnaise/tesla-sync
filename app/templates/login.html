{% extends "base.html" %}

{% block content %}
    <h1>Sign In</h1>
    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        
        <label for="email">
            {{ form.email.label }}
            {{ form.email(size=32) }}
            {% for error in form.email.errors %}
            <small style="color: red;">{{ error }}</small>
            {% endfor %}
        </label>
        
        <label for="password">
            {{ form.password.label }}
            {{ form.password(size=32) }}
            {% for error in form.password.errors %}
            <small style="color: red;">{{ error }}</small>
            {% endfor %}
        </label>
        
        <fieldset>
            <label for="remember_me">
                {{ form.remember_me() }}
                {{ form.remember_me.label }}
            </label>
        </fieldset>

        {{ form.submit() }}
    </form>
    {% if allow_registration %}
    <p>New User? <a href="{{ url_for('main.register') }}">Click to Register!</a></p>
    {% endif %}

    <details style="margin-top: 2em;">
        <summary style="font-size: 0.85em; color: var(--muted-color);">Forgot password or locked out?</summary>
        <p style="font-size: 0.8em; margin-top: 0.5em;">
            If you've forgotten your password or are locked out of your account (e.g., lost 2FA device),
            you can reset your account. This will delete all settings and data.
        </p>
        <a href="{{ url_for('main.reset_account') }}" style="font-size: 0.85em; color: #e74c3c;">
            Reset Account
        </a>
    </details>
{% endblock %}
