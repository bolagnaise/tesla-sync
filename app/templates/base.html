<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title }} - Tesla Sync</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="64x64" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="apple-touch-icon" sizes="512x512" href="{{ url_for('static', filename='icon-512.png') }}">
    <!-- Pico.css for clean, modern styling with zero effort -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">

    <!-- Mobile-responsive CSS -->
    <style>
      /* Tablet breakpoint (screens smaller than 768px) */
      @media (max-width: 768px) {
        /* Make navigation more compact */
        nav.container-fluid ul li {
          font-size: 0.9em;
        }

        /* Stack connection status boxes vertically */
        #connection-status > div {
          grid-template-columns: 1fr !important;
        }

        /* Stack energy chart grid to single column */
        article#energy-usage-section > div[style*="grid"] {
          grid-template-columns: 1fr !important;
        }

        /* Make energy summaries grid responsive */
        #energy-summaries-content > div[style*="grid"] {
          grid-template-columns: 1fr !important;
        }

        /* Reduce padding on articles for mobile */
        article {
          padding: 1em;
        }

        /* Make tables scroll horizontally if needed */
        table {
          font-size: 0.85em;
        }

        /* Adjust header float buttons to stack */
        article header div[style*="float: right"] {
          float: none !important;
          margin-top: 0.5em;
          display: flex;
          flex-wrap: wrap;
          gap: 0.5em;
        }
      }

      /* Mobile breakpoint (screens smaller than 480px) */
      @media (max-width: 480px) {
        /* Reduce base font size slightly */
        body {
          font-size: 14px;
        }

        /* Make logo and title smaller */
        nav.container-fluid img {
          width: 32px !important;
          height: 32px !important;
        }

        nav.container-fluid strong {
          font-size: 1em;
        }

        /* Hide navigation text, keep only icons/links clickable */
        nav.container-fluid ul {
          font-size: 0.85em;
        }

        /* Reduce price circle sizes */
        #import-selector > div, #export-selector > div {
          width: 140px !important;
          height: 140px !important;
        }

        #import-selector #current-general-price,
        #export-selector #current-feedin-price {
          font-size: 2.5em !important;
        }

        /* Make AEMO price displays responsive */
        #aemo-price-monitor > div[style*="flex"] {
          flex-direction: column !important;
          gap: 1em !important;
        }

        #aemo-price-display,
        #aemo-price-monitor > div > div > div {
          min-width: 150px !important;
          padding: 1em !important;
        }

        #aemo-current-price {
          font-size: 2.5em !important;
        }

        #aemo-threshold {
          font-size: 2em !important;
        }

        /* Reduce hgroup sizes */
        hgroup h1 {
          font-size: 1.8em;
        }

        hgroup h2 {
          font-size: 1em;
        }

        /* Make 5-min forecast tiles smaller */
        #five-min-forecast > div {
          min-width: 60px !important;
          padding: 0.5em !important;
        }

        #five-min-forecast > div > div:nth-child(2) {
          font-size: 2em !important;
        }

        #five-min-forecast > div > div:nth-child(3) {
          font-size: 0.85em !important;
        }

        /* Ensure buttons are touch-friendly */
        button, input[type="submit"], a[role="button"] {
          min-height: 44px;
          padding: 0.6em 1em;
        }

        /* Reduce padding on containers */
        main.container {
          padding: 0.5em;
        }

        /* Make tables more compact */
        table {
          font-size: 0.75em;
        }

        table th, table td {
          padding: 0.4em !important;
        }

        /* Adjust connection status box */
        #connection-status {
          max-width: 100% !important;
          padding: 0.5rem !important;
        }

        /* Make battery status display more compact */
        #battery-content .grid {
          grid-template-columns: 1fr !important;
        }

        #battery-content p[style*="font-size: 3em"] {
          font-size: 2.5em !important;
        }

        /* Adjust chart heights for mobile */
        canvas {
          max-height: 250px !important;
        }

        /* Stack select and button combos */
        header div[style*="float"] select,
        header div[style*="float"] button {
          flex: 1 1 auto;
          min-width: 120px;
        }
      }

      /* Extra small mobile (screens smaller than 360px) */
      @media (max-width: 360px) {
        /* Further reduce sizes for very small screens */
        #import-selector > div, #export-selector > div {
          width: 120px !important;
          height: 120px !important;
        }

        #import-selector #current-general-price,
        #export-selector #current-feedin-price {
          font-size: 2em !important;
        }

        #five-min-forecast > div {
          min-width: 55px !important;
        }

        nav.container-fluid {
          padding: 0.5em;
        }
      }
    </style>
  </head>
  <body>
    <nav class="container-fluid">
      <ul>
        <li style="display: flex; align-items: center; gap: 0.75em;">
          <img src="{{ url_for('static', filename='icon-512.png') }}" alt="Tesla Sync Logo" style="width: 40px; height: 40px; border-radius: 8px;">
          <strong>Tesla Sync</strong>
        </li>
      </ul>
      <ul>
        {% if current_user.is_anonymous %}
        <li><a href="{{ url_for('main.login') }}">Login</a></li>
        <li><a href="{{ url_for('main.register') }}">Register</a></li>
        {% else %}
        <li><a href="{{ url_for('main.dashboard') }}">Dashboard</a></li>
        <li><a href="{{ url_for('main.settings') }}">Settings</a></li>
        <li><a href="{{ url_for('main.logout') }}">Logout</a></li>
        {% endif %}
      </ul>
    </nav>
    <main class="container">
      {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
        <article style="background-color: var(--primary-focus);">{{ message }}</article>
        {% endfor %}
      {% endif %}
      {% endwith %}
      
      {% block content %}{% endblock %}
    </main>
  </body>
</html>
