{
  "config": {
    "step": {
      "user": {
        "title": "PowerSync Setup",
        "description": "Configure PowerSync to automatically sync electricity pricing to your battery system.",
        "submit_button": "Next"
      },
      "provider_selection": {
        "title": "Select Electricity Provider",
        "description": "Choose your electricity provider:\n\n**Amber Electric**: Full real-time price sync using Amber API.\n\n**Flow Power**: Wholesale electricity with Happy Hour exports. Choose AEMO or Amber pricing.\n\n**Globird/VPP**: AEMO spike detection for VPP exports.",
        "data": {
          "electricity_provider": "Electricity Provider"
        },
        "submit_button": "Next"
      },
      "flow_power_setup": {
        "title": "Flow Power Configuration",
        "description": "Configure your Flow Power settings.\n\nPEA (Price Efficiency Adjustment) uses Flow Power's actual billing model: Final Rate = Base Rate + (Wholesale - 9.7c).\n\nSelect your network tariff from the dropdown for fallback rates when PEA is disabled.",
        "data": {
          "flow_power_state": "State / NEM Region",
          "flow_power_price_source": "Price Source",
          "network_tariff_combined": "Network Tariff",
          "network_use_manual_rates": "Use manual rates instead of automatic lookup",
          "network_tariff_type": "Network Tariff Type",
          "network_flat_rate": "Flat Network Rate (c/kWh)",
          "network_peak_rate": "Peak Rate (c/kWh)",
          "network_shoulder_rate": "Shoulder Rate (c/kWh)",
          "network_offpeak_rate": "Off-Peak Rate (c/kWh)",
          "network_peak_start": "Peak Start Time",
          "network_peak_end": "Peak End Time",
          "network_offpeak_start": "Off-Peak Start Time",
          "network_offpeak_end": "Off-Peak End Time",
          "network_other_fees": "Other Fees (c/kWh)",
          "network_include_gst": "Include GST (10%)",
          "pea_enabled": "Enable PEA Pricing (Recommended)",
          "flow_power_base_rate": "Base Rate (c/kWh)",
          "pea_custom_value": "Custom PEA Override (c/kWh, leave empty for auto)",
          "auto_sync_enabled": "Enable automatic TOU schedule syncing",
          "battery_curtailment_enabled": "Enable Battery Export Curtailment"
        },
        "data_description": {
          "auto_sync_enabled": "Automatically upload TOU tariff schedules to your battery system based on current electricity prices",
          "battery_curtailment_enabled": "Stop battery from exporting to grid when feed-in price is negative. This is the MAIN toggle - must be enabled for curtailment to work."
        },
        "submit_button": "Next"
      },
      "amber": {
        "title": "Amber Electric Configuration",
        "description": "Enter your Amber Electric API token. You can get this from {amber_url}",
        "data": {
          "amber_api_token": "Amber API Token"
        },
        "submit_button": "Next"
      },
      "amber_settings": {
        "title": "Amber Settings",
        "description": "Configure spike protection and export boost settings.\n\nSpike protection prevents grid charging during high prices.\nExport boost triggers battery exports at lower price points.",
        "data": {
          "spike_protection_enabled": "Enable Spike Protection",
          "settled_prices_only": "Settled Prices Only (skip forecast sync)",
          "force_tariff_mode_toggle": "Force Mode Toggle (faster PW response)",
          "export_boost_enabled": "Enable Export Price Boost",
          "export_price_offset": "Offset to Add (c/kWh)",
          "export_min_price": "Minimum Floor (c/kWh)",
          "export_boost_start": "Boost Start Time (HH:MM)",
          "export_boost_end": "Boost End Time (HH:MM)",
          "export_boost_threshold": "Only Boost Above (c/kWh)",
          "chip_mode_enabled": "Enable Chip Mode",
          "chip_mode_start": "Chip Mode Start Time (HH:MM)",
          "chip_mode_end": "Chip Mode End Time (HH:MM)",
          "chip_mode_threshold": "Price Threshold (c/kWh)"
        },
        "data_description": {
          "spike_protection_enabled": "When Amber detects a price spike, artificially inflate buy prices to prevent your battery from charging from grid",
          "settled_prices_only": "Skip forecast sync at :00 and only sync when actual prices arrive at :35/:60",
          "force_tariff_mode_toggle": "After uploading a new tariff, briefly toggle operation mode to force immediate recalculation (Tesla only)",
          "export_boost_enabled": "Artificially increase sell prices during configured hours to encourage battery export during high-value periods",
          "export_price_offset": "Amount to ADD to the actual Amber export price. Example: Amber=18c + Offset=5c → Tesla sees 23c",
          "export_min_price": "Floor price AFTER offset is applied. Example: Amber=12c + Offset=5c = 17c → bumped up to Floor=20c",
          "export_boost_threshold": "Only apply boost when ACTUAL Amber price (before boost) is at or above this value. Prices below this are sent unchanged. Use 0 to always boost.",
          "chip_mode_enabled": "Suppress exports during configured hours unless price exceeds threshold (inverse of Export Boost)",
          "chip_mode_threshold": "Allow exports only when price is at or above this value"
        },
        "submit_button": "Next"
      },
      "aemo_config": {
        "title": "AEMO Spike Detection",
        "description": "Configure AEMO wholesale price spike detection. When prices spike above your threshold, your battery will be configured to export energy to the grid.\n\n{threshold_hint}",
        "data": {
          "aemo_spike_enabled": "Enable AEMO Spike Detection",
          "aemo_region": "NEM Region",
          "aemo_spike_threshold": "Spike Threshold ($/MWh)"
        },
        "submit_button": "Next"
      },
      "battery_system": {
        "title": "Select Battery System",
        "description": "Choose your battery storage system:\n\n**Tesla Powerwall**: Connect via Fleet API or Teslemetry.\n\n**Sigenergy**: Connect via Sigenergy Cloud API.",
        "data": {
          "battery_system": "Battery System"
        },
        "submit_button": "Next"
      },
      "sigenergy_credentials": {
        "title": "Sigenergy Credentials",
        "description": "Enter your Sigenergy Cloud API credentials.\n\n**How to get credentials:**\n1. Open browser dev tools (F12)\n2. Go to Network tab\n3. Login to web-aus.sigencloud.com\n4. Find 'token' request and copy from Payload:\n   - username → Email\n   - password → Encrypted Password\n   - userDeviceId → Device ID",
        "data": {
          "sigenergy_username": "Sigenergy Email",
          "sigenergy_pass_enc": "Encrypted Password",
          "sigenergy_device_id": "Device ID (13 digits)"
        },
        "submit_button": "Validate"
      },
      "sigenergy_station": {
        "title": "Sigenergy Station",
        "description": "Select or enter your Sigenergy Station ID.\n\nIf the station list is unavailable, enter your Station ID manually. To find it, ask SigenAI 'Tell me my StationID' in the Sigenergy app.",
        "data": {
          "sigenergy_station_id": "Station ID"
        },
        "submit_button": "Next"
      },
      "sigenergy_dc_curtailment": {
        "title": "Sigenergy DC Solar Curtailment",
        "description": "Configure DC solar curtailment for your Sigenergy system.\n\nWhen enabled, PowerSync can limit DC solar production during negative prices by setting the PV power limit via Modbus TCP.\n\n**Note:** This is for DC solar connected directly to your Sigenergy system. AC-coupled inverters from other brands can be configured separately.",
        "data": {
          "sigenergy_dc_curtailment_enabled": "Enable DC Solar Curtailment",
          "sigenergy_modbus_host": "Sigenergy IP Address",
          "sigenergy_modbus_port": "Modbus Port",
          "sigenergy_modbus_slave_id": "Modbus Slave ID"
        },
        "data_description": {
          "sigenergy_dc_curtailment_enabled": "Allow PowerSync to control DC solar production via Modbus",
          "sigenergy_modbus_host": "Local IP address of your Sigenergy system"
        },
        "submit_button": "Finish"
      },
      "tesla_provider": {
        "title": "Choose Tesla API Provider",
        "description": "{fleet_detected}\n\nSelect how you want to access your Tesla Powerwall. Tesla Fleet API is free but requires the Tesla Fleet integration to be installed. Teslemetry is a paid proxy service (~$4/month) that's easier to set up.",
        "data": {
          "tesla_api_provider": "Tesla API Provider"
        },
        "submit_button": "Next"
      },
      "teslemetry": {
        "title": "Teslemetry Configuration",
        "description": "Enter your Teslemetry API token. You can get this from {teslemetry_url}",
        "data": {
          "teslemetry_api_token": "Teslemetry API Token"
        },
        "submit_button": "Next"
      },
      "site_selection": {
        "title": "Site Selection",
        "description": "Select your Tesla energy site and Amber site (if you have multiple), and configure sync options.",
        "data": {
          "tesla_energy_site_id": "Tesla Energy Site",
          "amber_site_id": "Amber Site (if you have multiple)",
          "auto_sync_enabled": "Enable automatic TOU schedule syncing",
          "amber_forecast_type": "Amber Forecast Type",
          "battery_curtailment_enabled": "Enable Battery Export Curtailment"
        },
        "data_description": {
          "auto_sync_enabled": "Automatically upload TOU tariff schedules to your battery system based on current electricity prices",
          "amber_forecast_type": "Which Amber price forecast to use: Predicted (balanced), Low/Aggressive (assumes cheaper prices), High/Conservative (assumes higher prices)",
          "battery_curtailment_enabled": "Stop battery from exporting to grid when feed-in price is negative. This is the MAIN toggle - must be enabled for curtailment to work."
        },
        "submit_button": "Submit"
      },
      "demand_charges": {
        "title": "Demand Charge Configuration (Optional)",
        "description": "Configure demand charge tracking for electricity plans with capacity-based fees. Demand charges are applied during peak periods based on your maximum power draw. Leave 'Enable Demand Charge Tracking' unchecked to skip this step.",
        "data": {
          "demand_charge_enabled": "Enable Demand Charge Tracking",
          "demand_charge_rate": "Demand Charge Rate ($/kW)",
          "demand_charge_start_time": "Peak Period Start Time (HH:MM)",
          "demand_charge_end_time": "Peak Period End Time (HH:MM)"
        },
        "data_description": {
          "demand_charge_enabled": "Track your peak grid draw during demand charge periods and calculate monthly capacity fees based on your highest 30-minute average"
        },
        "submit_button": "Submit"
      }
    },
    "error": {
      "invalid_auth": "Invalid API token. Please check your token and try again.",
      "cannot_connect": "Unable to connect to API. Please check your internet connection.",
      "no_sites": "No Amber Electric sites found for this account.",
      "no_energy_sites": "No Tesla energy sites found in your account.",
      "no_token_provided": "Please provide a Teslemetry API token.",
      "aemo_region_required": "Please select an AEMO NEM region when spike detection is enabled.",
      "aemo_required_in_aemo_mode": "AEMO spike detection must be enabled in AEMO-only mode.",
      "missing_credentials": "Please provide all Sigenergy credentials (email, password, and device ID).",
      "invalid_device_id": "Device ID must be exactly 13 digits.",
      "no_stations": "No Sigenergy stations found for this account.",
      "no_station_selected": "Please select a Sigenergy station.",
      "modbus_host_required": "IP address is required when DC curtailment is enabled.",
      "unknown": "An unexpected error occurred. Please try again."
    },
    "abort": {
      "already_configured": "PowerSync is already configured.",
      "no_energy_sites": "No Tesla energy sites found in your Teslemetry account. Please ensure you have a Powerwall or Solar system configured.",
      "no_stations": "No Sigenergy stations found for this account. Please check your credentials."
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "PowerSync Settings",
        "description": "Configure your electricity provider and Tesla API connection.",
        "data": {
          "electricity_provider": "Electricity Provider",
          "tesla_api_provider": "Tesla API Provider"
        }
      },
      "teslemetry_token": {
        "title": "Teslemetry Configuration",
        "description": "Enter your Teslemetry API token. You can get this from https://teslemetry.com",
        "data": {
          "teslemetry_api_token": "Teslemetry API Token"
        }
      },
      "amber_options": {
        "title": "Amber Electric Options",
        "description": "Configure Amber Electric TOU sync, export boost, demand charges, and supply charges.",
        "data": {
          "auto_sync_enabled": "Enable automatic TOU schedule syncing",
          "amber_forecast_type": "Amber Forecast Type",
          "battery_curtailment_enabled": "Enable Battery Export Curtailment",
          "spike_protection_enabled": "Enable Spike Protection (prevent grid charging during spikes)",
          "settled_prices_only": "Settled Prices Only (skip forecast sync)",
          "force_tariff_mode_toggle": "Force Mode Toggle (ALPHA) - faster PW response",
          "export_boost_enabled": "Enable Export Price Boost",
          "export_price_offset": "Offset to Add (c/kWh)",
          "export_min_price": "Minimum Floor (c/kWh)",
          "export_boost_start": "Boost Start Time (HH:MM)",
          "export_boost_end": "Boost End Time (HH:MM)",
          "export_boost_threshold": "Only Boost Above (c/kWh)",
          "chip_mode_enabled": "Enable Chip Mode",
          "chip_mode_start": "Chip Mode Start Time (HH:MM)",
          "chip_mode_end": "Chip Mode End Time (HH:MM)",
          "chip_mode_threshold": "Price Threshold (c/kWh)",
          "demand_charge_enabled": "Enable Demand Charge Tracking",
          "demand_charge_rate": "Demand Charge Rate ($/kW)",
          "demand_charge_start_time": "Peak Period Start Time (HH:MM)",
          "demand_charge_end_time": "Peak Period End Time (HH:MM)",
          "demand_charge_days": "Demand Charge Days",
          "demand_charge_billing_day": "Billing Cycle Reset Day",
          "demand_charge_apply_to": "Apply Demand Charge To",
          "demand_artificial_price_enabled": "Artificial Price Increase (ALPHA)",
          "daily_supply_charge": "Daily Supply Charge ($)",
          "monthly_supply_charge": "Monthly Supply Charge ($)",
          "ac_inverter_curtailment_enabled": "Enable AC-Coupled Inverter Shutdown",
          "inverter_brand": "Inverter Brand",
          "inverter_model": "Inverter Model",
          "inverter_host": "Inverter IP Address",
          "inverter_port": "Modbus Port",
          "inverter_slave_id": "Modbus Slave ID"
        },
        "data_description": {
          "auto_sync_enabled": "Automatically upload TOU tariff schedules to your battery system based on current electricity prices",
          "amber_forecast_type": "Which Amber price forecast to use: Predicted (balanced), Low/Aggressive (assumes cheaper prices), High/Conservative (assumes higher prices)",
          "battery_curtailment_enabled": "Stop battery from exporting to grid when feed-in price is negative. Sets Tesla to self-consumption mode or Sigenergy export limit to 0. This is the MAIN toggle - must be enabled for curtailment to work.",
          "spike_protection_enabled": "When Amber detects a price spike, artificially inflate buy prices to prevent your battery from charging from grid (stops arbitrage behavior)",
          "ac_inverter_curtailment_enabled": "Shutdown AC-coupled solar inverter (Fronius, Sungrow, GoodWe, Enphase, etc.) when feed-in price is negative. Use this if your solar bypasses the battery and exports directly to grid. Requires inverter IP configuration.",
          "settled_prices_only": "Skip the initial forecast sync at :00 and only sync when actual/settled prices arrive at :35/:60 seconds. Use this if forecast prices differ significantly from settled prices.",
          "force_tariff_mode_toggle": "After uploading a new tariff, briefly toggle operation mode to force immediate recalculation of battery behavior (Tesla only, ~5 second interruption)",
          "export_boost_enabled": "Artificially increase sell prices during configured hours to encourage battery export during high-value periods",
          "export_price_offset": "Amount to ADD to the actual Amber export price. Example: Amber=18c + Offset=5c → Tesla sees 23c",
          "export_min_price": "Floor price AFTER offset is applied. Example: Amber=12c + Offset=5c = 17c → bumped up to Floor=20c",
          "export_boost_threshold": "Only apply boost when ACTUAL Amber price (before boost) is at or above this value. Prices below this are sent unchanged. Use 0 to always boost.",
          "demand_charge_enabled": "Track your peak grid draw during demand charge periods and calculate monthly capacity fees based on your highest 30-minute average",
          "demand_artificial_price_enabled": "Artificially increases the current price by $2 during demand charge periods to encourage battery discharge",
          "chip_mode_enabled": "Suppress exports during configured hours unless price exceeds threshold (inverse of Export Boost)",
          "chip_mode_threshold": "Allow exports only when price is at or above this value"
        }
      },
      "flow_power_options": {
        "title": "Flow Power Options",
        "description": "Configure Flow Power wholesale electricity with Happy Hour export rates (5:30pm-7:30pm: 45c NSW/QLD/SA, 35c VIC).\n\nPEA (Price Efficiency Adjustment) uses Flow Power's actual billing: Final Rate = Base Rate + (Wholesale - 9.7c).\n\nNetwork tariff is used when PEA is disabled.",
        "data": {
          "flow_power_state": "State / NEM Region",
          "flow_power_price_source": "Import Price Source",
          "network_tariff_combined": "Network Tariff",
          "network_use_manual_rates": "Use manual rates instead of automatic lookup",
          "pea_enabled": "Enable PEA Pricing (Recommended)",
          "flow_power_base_rate": "Base Rate (c/kWh)",
          "pea_custom_value": "Custom PEA Override (c/kWh, leave empty for auto)",
          "auto_sync_enabled": "Enable automatic TOU schedule syncing",
          "battery_curtailment_enabled": "Enable Battery Export Curtailment",
          "demand_charge_enabled": "Enable Demand Charge Tracking",
          "demand_charge_rate": "Demand Charge Rate ($/kW)",
          "demand_charge_start_time": "Peak Period Start Time (HH:MM)",
          "demand_charge_end_time": "Peak Period End Time (HH:MM)",
          "demand_charge_days": "Demand Charge Days",
          "demand_charge_billing_day": "Billing Cycle Reset Day",
          "demand_charge_apply_to": "Apply Demand Charge To",
          "daily_supply_charge": "Daily Supply Charge ($)",
          "monthly_supply_charge": "Monthly Supply Charge ($)"
        },
        "data_description": {
          "auto_sync_enabled": "Automatically upload TOU tariff schedules to your battery system based on current electricity prices",
          "battery_curtailment_enabled": "Stop battery from exporting to grid when feed-in price is negative. Sets Tesla to self-consumption mode or Sigenergy export limit to 0. This is the MAIN toggle - must be enabled for curtailment to work.",
          "demand_charge_enabled": "Track your peak grid draw during demand charge periods and calculate monthly capacity fees based on your highest 30-minute average"
        }
      },
      "curtailment_options": {
        "title": "Negative FIT Curtailment Settings",
        "description": "Configure automatic curtailment during negative feed-in tariff (FIT) prices.\n\nWhen feed-in prices go negative, you PAY to export power. These settings prevent that by stopping battery export and optionally shutting down solar production.",
        "data": {
          "battery_curtailment_enabled": "Enable Battery Export Curtailment",
          "ac_inverter_curtailment_enabled": "Enable AC-Coupled Inverter Shutdown",
          "sigenergy_dc_curtailment_enabled": "Enable DC Solar Curtailment (Sigenergy)"
        },
        "data_description": {
          "battery_curtailment_enabled": "Stop battery from exporting to grid when feed-in price is negative. Sets Tesla to self-consumption mode or Sigenergy export limit to 0. This is the MAIN toggle - must be enabled for curtailment to work.",
          "ac_inverter_curtailment_enabled": "Shutdown AC-coupled solar inverter (Fronius, Sungrow, GoodWe, Enphase, etc.) when feed-in price is negative. Use this if your solar bypasses the battery and exports directly to grid. Requires inverter IP configuration in next step.",
          "sigenergy_dc_curtailment_enabled": "Limit DC solar production via Sigenergy Modbus when feed-in price is negative. Only applies to Sigenergy systems with DC-coupled solar."
        }
      },
      "globird_options": {
        "title": "Globird - AEMO Spike Detection",
        "description": "Configure AEMO wholesale price spike detection. When prices spike above your threshold, your battery will export to the grid.",
        "data": {
          "aemo_region": "AEMO NEM Region",
          "aemo_spike_threshold": "Spike Threshold ($/MWh)"
        }
      },
      "inverter_brand": {
        "title": "AC-Coupled Inverter Setup",
        "description": "Select your solar inverter brand for direct curtailment control.\n\nThis allows PowerSync to shut down your AC-coupled solar inverter when feed-in prices are negative.",
        "data": {
          "inverter_brand": "Inverter Brand"
        }
      },
      "inverter_config": {
        "title": "{brand} Inverter Configuration",
        "description": "Configure your {brand} inverter connection settings.",
        "data": {
          "inverter_model": "Inverter Model",
          "inverter_host": "IP Address / Hostname",
          "inverter_port": "Port",
          "inverter_slave_id": "Modbus Slave ID",
          "inverter_token": "JWT Token",
          "inverter_restore_soc": "Restore SOC Threshold (%)"
        },
        "data_description": {
          "inverter_host": "Local IP address of your inverter or gateway",
          "inverter_port": "502 for Modbus (Sungrow, Fronius, GoodWe, Huawei), 443 for Enphase",
          "inverter_slave_id": "Usually 1. GoodWe uses 247 by default.",
          "inverter_token": "Enphase JWT token for firmware 7.x+. Get from https://entrez.enphaseenergy.com/",
          "inverter_restore_soc": "Restore inverter when battery drops below this %. Ensures battery stays topped up before evening peak. Default: 98%"
        }
      }
    }
  },
  "entity": {
    "sensor": {
      "current_price": {
        "name": "Current Electricity Price"
      },
      "solar_power": {
        "name": "Solar Power"
      },
      "grid_power": {
        "name": "Grid Power"
      },
      "battery_power": {
        "name": "Battery Power"
      },
      "home_load": {
        "name": "Home Load"
      },
      "battery_level": {
        "name": "Battery Level"
      },
      "grid_import_power": {
        "name": "Grid Import Power"
      },
      "in_demand_charge_period": {
        "name": "In Demand Charge Period"
      },
      "peak_demand_this_cycle": {
        "name": "Peak Demand This Cycle"
      },
      "demand_charge_cost": {
        "name": "Demand Charge Cost This Month"
      },
      "days_until_demand_reset": {
        "name": "Days Until Demand Reset"
      },
      "aemo_price": {
        "name": "AEMO Wholesale Price"
      },
      "aemo_spike_status": {
        "name": "AEMO Spike Status"
      },
      "tariff_schedule": {
        "name": "Tariff Schedule"
      },
      "flow_power_price": {
        "name": "Flow Power Import Price"
      },
      "flow_power_export_price": {
        "name": "Flow Power Export Price"
      },
      "inverter_status": {
        "name": "Inverter Status"
      }
    },
    "switch": {
      "auto_sync": {
        "name": "Auto-Sync TOU Schedule"
      }
    }
  },
  "services": {
    "sync_tou_schedule": {
      "name": "Sync TOU Schedule",
      "description": "Manually trigger a sync of Time-of-Use schedule from Amber to Tesla"
    },
    "sync_now": {
      "name": "Sync Now",
      "description": "Immediately refresh data from Amber and Tesla"
    }
  }
}
